{"ast":null,"code":"import Data from '../../../../../data/data.js';\nimport recordChange from '../../../../../data/modifiers/recordChange.js';\nfunction applyTextChangeHandler(entryCell) {\n  let changeOccurred = false;\n  const input = entryCell.querySelector('input');\n  const row = [...entryCell.classList].filter(name => /^row\\d+$/.test(name))[0];\n  const col = [...entryCell.classList].filter(name => /^col\\d+$/.test(name))[0];\n  let rowNum = parseInt(row.match(/(\\d+)/)[0], 10);\n  let colNum = parseInt(col.match(/(\\d+)/)[0], 10);\n  let prevData = new Data();\n  let newData = new Data();\n  let uselessStyleMap = new Map();\n  const onFocusHandler = function (e) {\n    prevData.setIndividualEntry('.' + row + '.' + col, uselessStyleMap, rowNum, colNum, input.value);\n    input.addEventListener('change', onChangeHandler);\n    input.addEventListener('blur', onBlurHandler);\n  };\n  const onChangeHandler = function (e) {\n    changeOccurred = true;\n  };\n  const onBlurHandler = function (e) {\n    if (changeOccurred) {\n      e.target.parentElement.querySelector('.cellValue').innerText = input.value;\n      newData.setIndividualEntry('.' + row + '.' + col, uselessStyleMap, rowNum, colNum, input.value);\n      recordChange(prevData, newData);\n    }\n    changeOccurred = false;\n    input.removeEventListener('change', onChangeHandler);\n    input.removeEventListener('blur', onBlurHandler);\n    prevData = new Data();\n    newData = new Data();\n  };\n  input.addEventListener('focus', onFocusHandler);\n}\nexport default applyTextChangeHandler;","map":{"version":3,"names":["Data","recordChange","applyTextChangeHandler","entryCell","changeOccurred","input","querySelector","row","classList","filter","name","test","col","rowNum","parseInt","match","colNum","prevData","newData","uselessStyleMap","Map","onFocusHandler","e","setIndividualEntry","value","addEventListener","onChangeHandler","onBlurHandler","target","parentElement","innerText","removeEventListener"],"sources":["C:/Users/rband/Desktop/SpreadsheetPanel/client/src/components/TablePanel/handlers/cellHandler/textChangeHandler/textChangeHandler.js"],"sourcesContent":["import Data from '../../../../../data/data.js';\r\nimport recordChange from '../../../../../data/modifiers/recordChange.js';\r\n\r\nfunction applyTextChangeHandler(entryCell) {\r\n    let changeOccurred = false;\r\n    const input = entryCell.querySelector('input');\r\n    const row = [...entryCell.classList].filter(name => /^row\\d+$/.test(name))[0];\r\n    const col = [...entryCell.classList].filter(name => /^col\\d+$/.test(name))[0];\r\n    let rowNum = parseInt(row.match(/(\\d+)/)[0], 10);\r\n    let colNum = parseInt(col.match(/(\\d+)/)[0], 10);\r\n    let prevData = new Data();\r\n    let newData = new Data();\r\n    let uselessStyleMap = new Map();\r\n\r\n    const onFocusHandler = function (e) {\r\n        prevData.setIndividualEntry('.' + row + '.' + col, uselessStyleMap, rowNum, colNum, input.value);\r\n        input.addEventListener('change', onChangeHandler);\r\n        input.addEventListener('blur', onBlurHandler);\r\n    }\r\n\r\n    const onChangeHandler = function (e) {\r\n        changeOccurred = true;\r\n    }\r\n\r\n    const onBlurHandler = function (e) {\r\n        if (changeOccurred) {\r\n            e.target.parentElement.querySelector('.cellValue').innerText = input.value;\r\n            newData.setIndividualEntry('.' + row + '.' + col, uselessStyleMap, rowNum, colNum, input.value);\r\n            recordChange(prevData, newData);\r\n        }\r\n        changeOccurred = false;\r\n        input.removeEventListener('change', onChangeHandler);\r\n        input.removeEventListener('blur', onBlurHandler);\r\n        prevData = new Data();\r\n        newData = new Data();\r\n    }\r\n\r\n    input.addEventListener('focus', onFocusHandler);\r\n}\r\n\r\nexport default applyTextChangeHandler;"],"mappings":"AAAA,OAAOA,IAAI,MAAM,6BAA6B;AAC9C,OAAOC,YAAY,MAAM,+CAA+C;AAExE,SAASC,sBAAsB,CAACC,SAAS,EAAE;EACvC,IAAIC,cAAc,GAAG,KAAK;EAC1B,MAAMC,KAAK,GAAGF,SAAS,CAACG,aAAa,CAAC,OAAO,CAAC;EAC9C,MAAMC,GAAG,GAAG,CAAC,GAAGJ,SAAS,CAACK,SAAS,CAAC,CAACC,MAAM,CAACC,IAAI,IAAI,UAAU,CAACC,IAAI,CAACD,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;EAC7E,MAAME,GAAG,GAAG,CAAC,GAAGT,SAAS,CAACK,SAAS,CAAC,CAACC,MAAM,CAACC,IAAI,IAAI,UAAU,CAACC,IAAI,CAACD,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;EAC7E,IAAIG,MAAM,GAAGC,QAAQ,CAACP,GAAG,CAACQ,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;EAChD,IAAIC,MAAM,GAAGF,QAAQ,CAACF,GAAG,CAACG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;EAChD,IAAIE,QAAQ,GAAG,IAAIjB,IAAI,EAAE;EACzB,IAAIkB,OAAO,GAAG,IAAIlB,IAAI,EAAE;EACxB,IAAImB,eAAe,GAAG,IAAIC,GAAG,EAAE;EAE/B,MAAMC,cAAc,GAAG,UAAUC,CAAC,EAAE;IAChCL,QAAQ,CAACM,kBAAkB,CAAC,GAAG,GAAGhB,GAAG,GAAG,GAAG,GAAGK,GAAG,EAAEO,eAAe,EAAEN,MAAM,EAAEG,MAAM,EAAEX,KAAK,CAACmB,KAAK,CAAC;IAChGnB,KAAK,CAACoB,gBAAgB,CAAC,QAAQ,EAAEC,eAAe,CAAC;IACjDrB,KAAK,CAACoB,gBAAgB,CAAC,MAAM,EAAEE,aAAa,CAAC;EACjD,CAAC;EAED,MAAMD,eAAe,GAAG,UAAUJ,CAAC,EAAE;IACjClB,cAAc,GAAG,IAAI;EACzB,CAAC;EAED,MAAMuB,aAAa,GAAG,UAAUL,CAAC,EAAE;IAC/B,IAAIlB,cAAc,EAAE;MAChBkB,CAAC,CAACM,MAAM,CAACC,aAAa,CAACvB,aAAa,CAAC,YAAY,CAAC,CAACwB,SAAS,GAAGzB,KAAK,CAACmB,KAAK;MAC1EN,OAAO,CAACK,kBAAkB,CAAC,GAAG,GAAGhB,GAAG,GAAG,GAAG,GAAGK,GAAG,EAAEO,eAAe,EAAEN,MAAM,EAAEG,MAAM,EAAEX,KAAK,CAACmB,KAAK,CAAC;MAC/FvB,YAAY,CAACgB,QAAQ,EAAEC,OAAO,CAAC;IACnC;IACAd,cAAc,GAAG,KAAK;IACtBC,KAAK,CAAC0B,mBAAmB,CAAC,QAAQ,EAAEL,eAAe,CAAC;IACpDrB,KAAK,CAAC0B,mBAAmB,CAAC,MAAM,EAAEJ,aAAa,CAAC;IAChDV,QAAQ,GAAG,IAAIjB,IAAI,EAAE;IACrBkB,OAAO,GAAG,IAAIlB,IAAI,EAAE;EACxB,CAAC;EAEDK,KAAK,CAACoB,gBAAgB,CAAC,OAAO,EAAEJ,cAAc,CAAC;AACnD;AAEA,eAAenB,sBAAsB"},"metadata":{},"sourceType":"module","externalDependencies":[]}