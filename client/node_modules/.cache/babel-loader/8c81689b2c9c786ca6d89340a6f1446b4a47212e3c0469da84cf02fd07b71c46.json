{"ast":null,"code":"import _toConsumableArray from\"C:/Users/rband/Desktop/SpreadsheetPanel/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import Data from'../../../../../data/data.js';import recordChange from'../../../../../data/modifiers/recordChange.js';function applyTextChangeHandler(entryCell){var changeOccurred=false;var input=entryCell.querySelector('input');var row=_toConsumableArray(entryCell.classList).filter(function(name){return /^row\\d+$/.test(name);})[0];var col=_toConsumableArray(entryCell.classList).filter(function(name){return /^col\\d+$/.test(name);})[0];var rowNum=parseInt(row.match(/(\\d+)/)[0],10);var colNum=parseInt(col.match(/(\\d+)/)[0],10);var prevData=new Data();var newData=new Data();var uselessStyleMap=new Map();var onFocusHandler=function onFocusHandler(e){prevData.setIndividualEntry('.'+row+'.'+col,uselessStyleMap,rowNum,colNum,input.value);input.addEventListener('change',onChangeHandler);input.addEventListener('blur',onBlurHandler);};var onChangeHandler=function onChangeHandler(e){changeOccurred=true;};var onBlurHandler=function onBlurHandler(e){if(changeOccurred){e.target.parentElement.querySelector('.cellValue').innerText=input.value;newData.setIndividualEntry('.'+row+'.'+col,uselessStyleMap,rowNum,colNum,input.value);recordChange(prevData,newData);}changeOccurred=false;input.removeEventListener('change',onChangeHandler);input.removeEventListener('blur',onBlurHandler);prevData=new Data();newData=new Data();};input.addEventListener('focus',onFocusHandler);}export default applyTextChangeHandler;","map":{"version":3,"names":["Data","recordChange","applyTextChangeHandler","entryCell","changeOccurred","input","querySelector","row","classList","filter","name","test","col","rowNum","parseInt","match","colNum","prevData","newData","uselessStyleMap","Map","onFocusHandler","e","setIndividualEntry","value","addEventListener","onChangeHandler","onBlurHandler","target","parentElement","innerText","removeEventListener"],"sources":["C:/Users/rband/Desktop/SpreadsheetPanel/client/src/components/TablePanel/handlers/cellHandler/textChangeHandler/textChangeHandler.js"],"sourcesContent":["import Data from '../../../../../data/data.js';\r\nimport recordChange from '../../../../../data/modifiers/recordChange.js';\r\n\r\nfunction applyTextChangeHandler(entryCell) {\r\n    let changeOccurred = false;\r\n    const input = entryCell.querySelector('input');\r\n    const row = [...entryCell.classList].filter(name => /^row\\d+$/.test(name))[0];\r\n    const col = [...entryCell.classList].filter(name => /^col\\d+$/.test(name))[0];\r\n    let rowNum = parseInt(row.match(/(\\d+)/)[0], 10);\r\n    let colNum = parseInt(col.match(/(\\d+)/)[0], 10);\r\n    let prevData = new Data();\r\n    let newData = new Data();\r\n    let uselessStyleMap = new Map();\r\n\r\n    const onFocusHandler = function (e) {\r\n        prevData.setIndividualEntry('.' + row + '.' + col, uselessStyleMap, rowNum, colNum, input.value);\r\n        input.addEventListener('change', onChangeHandler);\r\n        input.addEventListener('blur', onBlurHandler);\r\n    }\r\n\r\n    const onChangeHandler = function (e) {\r\n        changeOccurred = true;\r\n    }\r\n\r\n    const onBlurHandler = function (e) {\r\n        if (changeOccurred) {\r\n            e.target.parentElement.querySelector('.cellValue').innerText = input.value;\r\n            newData.setIndividualEntry('.' + row + '.' + col, uselessStyleMap, rowNum, colNum, input.value);\r\n            recordChange(prevData, newData);\r\n        }\r\n        changeOccurred = false;\r\n        input.removeEventListener('change', onChangeHandler);\r\n        input.removeEventListener('blur', onBlurHandler);\r\n        prevData = new Data();\r\n        newData = new Data();\r\n    }\r\n\r\n    input.addEventListener('focus', onFocusHandler);\r\n}\r\n\r\nexport default applyTextChangeHandler;"],"mappings":"4IAAA,MAAOA,KAAI,KAAM,6BAA6B,CAC9C,MAAOC,aAAY,KAAM,+CAA+C,CAExE,QAASC,uBAAsB,CAACC,SAAS,CAAE,CACvC,GAAIC,eAAc,CAAG,KAAK,CAC1B,GAAMC,MAAK,CAAGF,SAAS,CAACG,aAAa,CAAC,OAAO,CAAC,CAC9C,GAAMC,IAAG,CAAG,mBAAIJ,SAAS,CAACK,SAAS,EAAEC,MAAM,CAAC,SAAAC,IAAI,QAAI,WAAU,CAACC,IAAI,CAACD,IAAI,CAAC,GAAC,CAAC,CAAC,CAAC,CAC7E,GAAME,IAAG,CAAG,mBAAIT,SAAS,CAACK,SAAS,EAAEC,MAAM,CAAC,SAAAC,IAAI,QAAI,WAAU,CAACC,IAAI,CAACD,IAAI,CAAC,GAAC,CAAC,CAAC,CAAC,CAC7E,GAAIG,OAAM,CAAGC,QAAQ,CAACP,GAAG,CAACQ,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAE,EAAE,CAAC,CAChD,GAAIC,OAAM,CAAGF,QAAQ,CAACF,GAAG,CAACG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAE,EAAE,CAAC,CAChD,GAAIE,SAAQ,CAAG,GAAIjB,KAAI,EAAE,CACzB,GAAIkB,QAAO,CAAG,GAAIlB,KAAI,EAAE,CACxB,GAAImB,gBAAe,CAAG,GAAIC,IAAG,EAAE,CAE/B,GAAMC,eAAc,CAAG,QAAjBA,eAAc,CAAaC,CAAC,CAAE,CAChCL,QAAQ,CAACM,kBAAkB,CAAC,GAAG,CAAGhB,GAAG,CAAG,GAAG,CAAGK,GAAG,CAAEO,eAAe,CAAEN,MAAM,CAAEG,MAAM,CAAEX,KAAK,CAACmB,KAAK,CAAC,CAChGnB,KAAK,CAACoB,gBAAgB,CAAC,QAAQ,CAAEC,eAAe,CAAC,CACjDrB,KAAK,CAACoB,gBAAgB,CAAC,MAAM,CAAEE,aAAa,CAAC,CACjD,CAAC,CAED,GAAMD,gBAAe,CAAG,QAAlBA,gBAAe,CAAaJ,CAAC,CAAE,CACjClB,cAAc,CAAG,IAAI,CACzB,CAAC,CAED,GAAMuB,cAAa,CAAG,QAAhBA,cAAa,CAAaL,CAAC,CAAE,CAC/B,GAAIlB,cAAc,CAAE,CAChBkB,CAAC,CAACM,MAAM,CAACC,aAAa,CAACvB,aAAa,CAAC,YAAY,CAAC,CAACwB,SAAS,CAAGzB,KAAK,CAACmB,KAAK,CAC1EN,OAAO,CAACK,kBAAkB,CAAC,GAAG,CAAGhB,GAAG,CAAG,GAAG,CAAGK,GAAG,CAAEO,eAAe,CAAEN,MAAM,CAAEG,MAAM,CAAEX,KAAK,CAACmB,KAAK,CAAC,CAC/FvB,YAAY,CAACgB,QAAQ,CAAEC,OAAO,CAAC,CACnC,CACAd,cAAc,CAAG,KAAK,CACtBC,KAAK,CAAC0B,mBAAmB,CAAC,QAAQ,CAAEL,eAAe,CAAC,CACpDrB,KAAK,CAAC0B,mBAAmB,CAAC,MAAM,CAAEJ,aAAa,CAAC,CAChDV,QAAQ,CAAG,GAAIjB,KAAI,EAAE,CACrBkB,OAAO,CAAG,GAAIlB,KAAI,EAAE,CACxB,CAAC,CAEDK,KAAK,CAACoB,gBAAgB,CAAC,OAAO,CAAEJ,cAAc,CAAC,CACnD,CAEA,cAAenB,uBAAsB"},"metadata":{},"sourceType":"module","externalDependencies":[]}