{"ast":null,"code":"import _slicedToArray from\"C:/Users/rband/Desktop/SpreadsheetPanel/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _createForOfIteratorHelper from\"C:/Users/rband/Desktop/SpreadsheetPanel/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import Data from'../data.js';function updateCollectedData(dataAfterChange,prevCollectedData){var updatedCollectedData=new Data();var _iterator=_createForOfIteratorHelper(dataAfterChange.getIndividualEntries()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),entryKey=_step$value[0],data=_step$value[1];var styleMap=new Map();if(prevCollectedData.hasIndividualEntry(entryKey)){styleMap=prevCollectedData.getIndividualEntry(entryKey).getStyleMap();}var _iterator5=_createForOfIteratorHelper(data.getStyleMap().entries()),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _step5$value=_slicedToArray(_step5.value,2),property=_step5$value[0],val=_step5$value[1];styleMap.set(property,val);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}var args=[entryKey,styleMap];if(entryKey!='table'&&!/\\.col\\d+/.test(entryKey))args.push(data.getRow());if(/\\.col\\d+/.test(entryKey)){args.push(data.getCellRow(),data.getCellCol());if(prevCollectedData.hasIndividualEntry(entryKey))args.push(prevCollectedData.getIndividualEntry(entryKey).getVal());else args.push(data.getVal());}updatedCollectedData.setIndividualEntry.apply(updatedCollectedData,args);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _iterator2=_createForOfIteratorHelper(prevCollectedData.getIndividualEntries()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_slicedToArray(_step2.value,2),_entryKey=_step2$value[0],_data=_step2$value[1];var _args=[_entryKey,_data.getStyleMap()];if(_entryKey!='table'&&!/\\.col\\d+/.test(_entryKey))_args.push(_data.getRow());if(/\\.col\\d+/.test(_entryKey))_args.push(_data.getCellRow(),_data.getCellCol(),_data.getVal());if(!updatedCollectedData.hasIndividualEntry(_entryKey))updatedCollectedData.setIndividualEntry.apply(updatedCollectedData,_args);}// group entries\n}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var _iterator3=_createForOfIteratorHelper(dataAfterChange.getGroupEntries()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _step3$value=_slicedToArray(_step3.value,2),group=_step3$value[0],_styleMap=_step3$value[1];var updatedStyleMap=new Map();if(prevCollectedData.hasGroup(group)){updatedStyleMap=prevCollectedData.getGroup(group);}var _iterator6=_createForOfIteratorHelper(_styleMap.entries()),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _step6$value=_slicedToArray(_step6.value,2),_property=_step6$value[0],_val=_step6$value[1];updatedStyleMap.set(_property,_val);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}updatedCollectedData.setGroup(group,updatedStyleMap);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}var _iterator4=_createForOfIteratorHelper(prevCollectedData.getGroupEntries()),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _step4$value=_slicedToArray(_step4.value,2),_group=_step4$value[0],_styleMap2=_step4$value[1];if(!updatedCollectedData.hasGroup(_group))updatedCollectedData.setGroup(_group,_styleMap2);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return updatedCollectedData;}export default updateCollectedData;","map":{"version":3,"names":["Data","updateCollectedData","dataAfterChange","prevCollectedData","updatedCollectedData","getIndividualEntries","entryKey","data","styleMap","Map","hasIndividualEntry","getIndividualEntry","getStyleMap","entries","property","val","set","args","test","push","getRow","getCellRow","getCellCol","getVal","setIndividualEntry","getGroupEntries","group","updatedStyleMap","hasGroup","getGroup","setGroup"],"sources":["C:/Users/rband/Desktop/SpreadsheetPanel/client/src/data/modifiers/updateCollectedData.js"],"sourcesContent":["import Data from '../data.js';\r\n\r\nfunction updateCollectedData(dataAfterChange, prevCollectedData) {\r\n    let updatedCollectedData = new Data();\r\n    for (const [entryKey, data] of dataAfterChange.getIndividualEntries()) {\r\n        let styleMap = new Map();\r\n        if (prevCollectedData.hasIndividualEntry(entryKey)) {\r\n            styleMap = prevCollectedData.getIndividualEntry(entryKey).getStyleMap();\r\n        }\r\n        for (const [property, val] of data.getStyleMap().entries()) styleMap.set(property, val);\r\n        let args = [entryKey, styleMap];\r\n        if (entryKey != 'table' && !/\\.col\\d+/.test(entryKey)) args.push(data.getRow());\r\n        if (/\\.col\\d+/.test(entryKey)) {\r\n            args.push(data.getCellRow(), data.getCellCol());\r\n            if (prevCollectedData.hasIndividualEntry(entryKey)) args.push(prevCollectedData.getIndividualEntry(entryKey).getVal());\r\n            else args.push(data.getVal());\r\n        }\r\n        updatedCollectedData.setIndividualEntry(...args);\r\n    }\r\n    for (const [entryKey, data] of prevCollectedData.getIndividualEntries()) {\r\n        let args = [entryKey, data.getStyleMap()];\r\n        if (entryKey != 'table' && !/\\.col\\d+/.test(entryKey)) args.push(data.getRow());\r\n        if (/\\.col\\d+/.test(entryKey)) args.push(data.getCellRow(), data.getCellCol(), data.getVal());\r\n        if (!updatedCollectedData.hasIndividualEntry(entryKey)) updatedCollectedData.setIndividualEntry(...args)\r\n    }\r\n    // group entries\r\n    for (const [group, styleMap] of dataAfterChange.getGroupEntries()) {\r\n        let updatedStyleMap = new Map();\r\n        if (prevCollectedData.hasGroup(group)) {\r\n            updatedStyleMap = prevCollectedData.getGroup(group);\r\n        }\r\n        for (const [property, val] of styleMap.entries()) updatedStyleMap.set(property, val);\r\n        updatedCollectedData.setGroup(group, updatedStyleMap);\r\n    }\r\n    for (const [group, styleMap] of prevCollectedData.getGroupEntries()) {\r\n        if (!updatedCollectedData.hasGroup(group)) updatedCollectedData.setGroup(group, styleMap)\r\n    }\r\n    return updatedCollectedData;\r\n}\r\nexport default updateCollectedData;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}