{"ast":null,"code":"import { compareDOM, compareStore, logError, logSuccess } from '../../../../tests/helper.js';\nimport { getInLine, nextTurn } from '../../../../tests/sequenceHelpers.js';\nimport { store } from './../../../../store/store.js';\nconst WAIT_IN_QUEUE = -1;\nconst ARRANGE = 0;\nconst ACTION_SELECT_CELL = 1;\nconst ACTION_TOGGLE_STRIKETHROUGH = 2;\nconst ASSERT = 3;\nfunction strikethroughTest(turn) {\n  let changes = [[4, 5], [1, 2], [3, 7], [8, 2], [2, 4]];\n  try {\n    if (changes.length > 0) checkReactionOfStrikethrough(1, changes[0], turn, true, changes.length);\n    for (let i = 1; i < changes.length; ++i) checkReactionOfStrikethrough(i + 1, changes[i], turn, false, changes.length);\n  } catch (e) {\n    console.log('Error: checkReactionOfstrikethrough param error: ' + e);\n    logError(null, null, null, null, e);\n  }\n}\nfunction checkReactionOfStrikethrough(testCaseIndex, testDetails, turn, isFirstCall, totalTestCases) {\n  let [selectedRowNum, selectedColNum] = testDetails;\n  let cellValue = document.querySelector(`.row${selectedRowNum}.col${selectedColNum}>.cellValueDiv>.cellValue`);\n  let myTurnNumber = getInLine(turn);\n  let stage = WAIT_IN_QUEUE;\n  let wasPreviouslyStrikethrough;\n  let prevState;\n  let prevHistoryIndex;\n  let timer = setInterval(() => {\n    try {\n      switch (stage) {\n        case WAIT_IN_QUEUE:\n          if (turn.current == myTurnNumber) {\n            if (isFirstCall) console.log('\\n--------STRIKETHROUGH TEST--------------------');\n            stage = ARRANGE;\n          }\n          break;\n        case ARRANGE:\n          let history = store.getState().history;\n          wasPreviouslyStrikethrough = cellValue.style.textDecoration == 'line-through';\n          prevState = history.changeHistory[history.changeHistoryIndex];\n          prevHistoryIndex = history.changeHistoryIndex;\n        case ACTION_SELECT_CELL:\n          let cell = document.querySelector(`.row${selectedRowNum}.col${selectedColNum} .coverDiv`);\n          cell.dispatchEvent(new MouseEvent('mousedown', {\n            bubbles: true,\n            cancelable: true,\n            clientX: 0\n          }));\n          stage = ACTION_TOGGLE_STRIKETHROUGH;\n          break;\n        case ACTION_TOGGLE_STRIKETHROUGH:\n          // trigger click event on strikethroughBtn\n          let strikethroughBtn = document.querySelector('.strikethrough__btn');\n          strikethroughBtn.dispatchEvent(new MouseEvent('click', {\n            bubbles: true,\n            cancelable: true,\n            clientX: 0\n          }));\n          stage = ASSERT;\n          break;\n        case ASSERT:\n          let prevPropertyObj = {\n            textDecoration: wasPreviouslyStrikethrough ? 'line-through' : 'none'\n          };\n          let propertyObj = {\n            textDecoration: wasPreviouslyStrikethrough ? 'none' : 'line-through'\n          };\n          compareDOM(selectedRowNum, selectedColNum, propertyObj);\n          compareStore(selectedRowNum, selectedColNum, prevPropertyObj, propertyObj, prevState, prevHistoryIndex);\n          console.log('strikethrough affects store and DOM correctly');\n          if (testCaseIndex == totalTestCases) logSuccess('strikethroughTest()', totalTestCases);\n          nextTurn(turn);\n          clearInterval(timer);\n          break;\n      }\n    } catch (e) {\n      let errMsg = 'Err: checkReactionOfStrikethrough(): { testCaseIndex: ' + testCaseIndex + ', rowNum: ' + selectedRowNum + ', colNum: ' + selectedColNum + ', toggling strikethrough: ' + wasPreviouslyStrikethrough ? 'off' : 'on' + ' } : ' + e;\n      console.log(errMsg);\n      logError(errMsg);\n      clearInterval(timer);\n    }\n  }, 200);\n}\nexport { strikethroughTest, checkReactionOfStrikethrough };","map":{"version":3,"names":["compareDOM","compareStore","logError","logSuccess","getInLine","nextTurn","store","WAIT_IN_QUEUE","ARRANGE","ACTION_SELECT_CELL","ACTION_TOGGLE_STRIKETHROUGH","ASSERT","strikethroughTest","turn","changes","length","checkReactionOfStrikethrough","i","e","console","log","testCaseIndex","testDetails","isFirstCall","totalTestCases","selectedRowNum","selectedColNum","cellValue","document","querySelector","myTurnNumber","stage","wasPreviouslyStrikethrough","prevState","prevHistoryIndex","timer","setInterval","current","history","getState","style","textDecoration","changeHistory","changeHistoryIndex","cell","dispatchEvent","MouseEvent","bubbles","cancelable","clientX","strikethroughBtn","prevPropertyObj","propertyObj","clearInterval","errMsg"],"sources":["C:/Users/rband/Desktop/SpreadsheetPanel/client/src/components/FormatPanel/components/Strikethrough/test.js"],"sourcesContent":["import { compareDOM, compareStore, logError, logSuccess } from '../../../../tests/helper.js';\r\nimport { getInLine, nextTurn } from '../../../../tests/sequenceHelpers.js'\r\nimport { store } from './../../../../store/store.js'\r\n\r\nconst WAIT_IN_QUEUE = -1;\r\nconst ARRANGE = 0;\r\nconst ACTION_SELECT_CELL = 1;\r\nconst ACTION_TOGGLE_STRIKETHROUGH = 2;\r\nconst ASSERT = 3;\r\n\r\nfunction strikethroughTest(turn) {\r\n    let changes = [[4, 5], [1, 2], [3, 7], [8, 2], [2, 4]];\r\n    try {\r\n        if (changes.length > 0) checkReactionOfStrikethrough(1, changes[0], turn, true, changes.length);\r\n        for (let i = 1; i < changes.length; ++i) checkReactionOfStrikethrough(i + 1, changes[i], turn, false, changes.length);\r\n    } catch (e) {\r\n        console.log('Error: checkReactionOfstrikethrough param error: ' + e);\r\n        logError(null, null, null, null, e);\r\n    }\r\n}\r\n\r\nfunction checkReactionOfStrikethrough(testCaseIndex, testDetails, turn, isFirstCall, totalTestCases) {\r\n    let [selectedRowNum, selectedColNum] = testDetails;\r\n    let cellValue = document.querySelector(`.row${selectedRowNum}.col${selectedColNum}>.cellValueDiv>.cellValue`);\r\n    let myTurnNumber = getInLine(turn);\r\n    let stage = WAIT_IN_QUEUE;\r\n    let wasPreviouslyStrikethrough;\r\n    let prevState;\r\n    let prevHistoryIndex;\r\n    let timer = setInterval(() => {\r\n        try {\r\n            switch (stage) {\r\n                case WAIT_IN_QUEUE:\r\n                    if (turn.current == myTurnNumber) {\r\n                        if (isFirstCall) console.log('\\n--------STRIKETHROUGH TEST--------------------');\r\n                        stage = ARRANGE;\r\n                    }\r\n                    break;\r\n                case ARRANGE:\r\n                    let history = store.getState().history;\r\n                    wasPreviouslyStrikethrough = cellValue.style.textDecoration == 'line-through';\r\n                    prevState = history.changeHistory[history.changeHistoryIndex];\r\n                    prevHistoryIndex = history.changeHistoryIndex;\r\n                case ACTION_SELECT_CELL:\r\n                    let cell = document.querySelector(`.row${selectedRowNum}.col${selectedColNum} .coverDiv`);\r\n                    cell.dispatchEvent(new MouseEvent('mousedown', { bubbles: true, cancelable: true, clientX: 0 }));\r\n                    stage = ACTION_TOGGLE_STRIKETHROUGH;\r\n                    break;\r\n                case ACTION_TOGGLE_STRIKETHROUGH:\r\n                    // trigger click event on strikethroughBtn\r\n                    let strikethroughBtn = document.querySelector('.strikethrough__btn');\r\n                    strikethroughBtn.dispatchEvent(new MouseEvent('click', { bubbles: true, cancelable: true, clientX: 0 }));\r\n                    stage = ASSERT;\r\n                    break;\r\n                case ASSERT:\r\n                    let prevPropertyObj = { textDecoration: wasPreviouslyStrikethrough ? 'line-through' : 'none' };\r\n                    let propertyObj = { textDecoration: wasPreviouslyStrikethrough ? 'none' : 'line-through' };\r\n                    compareDOM(selectedRowNum, selectedColNum, propertyObj);\r\n                    compareStore(selectedRowNum, selectedColNum, prevPropertyObj, propertyObj, prevState, prevHistoryIndex);\r\n                    console.log('strikethrough affects store and DOM correctly');\r\n                    if (testCaseIndex == totalTestCases) logSuccess('strikethroughTest()', totalTestCases);\r\n                    nextTurn(turn);\r\n                    clearInterval(timer);\r\n                    break;\r\n            }\r\n        } catch (e) {\r\n            let errMsg = 'Err: checkReactionOfStrikethrough(): { testCaseIndex: ' + testCaseIndex + ', rowNum: ' + selectedRowNum + ', colNum: ' + selectedColNum + ', toggling strikethrough: ' + wasPreviouslyStrikethrough ? 'off' : 'on' + ' } : ' + e;\r\n            console.log(errMsg);\r\n            logError(errMsg);\r\n            clearInterval(timer);\r\n        }\r\n    }, 200);\r\n}\r\n\r\nexport { strikethroughTest, checkReactionOfStrikethrough };"],"mappings":"AAAA,SAASA,UAAU,EAAEC,YAAY,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,6BAA6B;AAC5F,SAASC,SAAS,EAAEC,QAAQ,QAAQ,sCAAsC;AAC1E,SAASC,KAAK,QAAQ,8BAA8B;AAEpD,MAAMC,aAAa,GAAG,CAAC,CAAC;AACxB,MAAMC,OAAO,GAAG,CAAC;AACjB,MAAMC,kBAAkB,GAAG,CAAC;AAC5B,MAAMC,2BAA2B,GAAG,CAAC;AACrC,MAAMC,MAAM,GAAG,CAAC;AAEhB,SAASC,iBAAiB,CAACC,IAAI,EAAE;EAC7B,IAAIC,OAAO,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACtD,IAAI;IACA,IAAIA,OAAO,CAACC,MAAM,GAAG,CAAC,EAAEC,4BAA4B,CAAC,CAAC,EAAEF,OAAO,CAAC,CAAC,CAAC,EAAED,IAAI,EAAE,IAAI,EAAEC,OAAO,CAACC,MAAM,CAAC;IAC/F,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,OAAO,CAACC,MAAM,EAAE,EAAEE,CAAC,EAAED,4BAA4B,CAACC,CAAC,GAAG,CAAC,EAAEH,OAAO,CAACG,CAAC,CAAC,EAAEJ,IAAI,EAAE,KAAK,EAAEC,OAAO,CAACC,MAAM,CAAC;EACzH,CAAC,CAAC,OAAOG,CAAC,EAAE;IACRC,OAAO,CAACC,GAAG,CAAC,mDAAmD,GAAGF,CAAC,CAAC;IACpEhB,QAAQ,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAEgB,CAAC,CAAC;EACvC;AACJ;AAEA,SAASF,4BAA4B,CAACK,aAAa,EAAEC,WAAW,EAAET,IAAI,EAAEU,WAAW,EAAEC,cAAc,EAAE;EACjG,IAAI,CAACC,cAAc,EAAEC,cAAc,CAAC,GAAGJ,WAAW;EAClD,IAAIK,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAE,OAAMJ,cAAe,OAAMC,cAAe,2BAA0B,CAAC;EAC7G,IAAII,YAAY,GAAG1B,SAAS,CAACS,IAAI,CAAC;EAClC,IAAIkB,KAAK,GAAGxB,aAAa;EACzB,IAAIyB,0BAA0B;EAC9B,IAAIC,SAAS;EACb,IAAIC,gBAAgB;EACpB,IAAIC,KAAK,GAAGC,WAAW,CAAC,MAAM;IAC1B,IAAI;MACA,QAAQL,KAAK;QACT,KAAKxB,aAAa;UACd,IAAIM,IAAI,CAACwB,OAAO,IAAIP,YAAY,EAAE;YAC9B,IAAIP,WAAW,EAAEJ,OAAO,CAACC,GAAG,CAAC,kDAAkD,CAAC;YAChFW,KAAK,GAAGvB,OAAO;UACnB;UACA;QACJ,KAAKA,OAAO;UACR,IAAI8B,OAAO,GAAGhC,KAAK,CAACiC,QAAQ,EAAE,CAACD,OAAO;UACtCN,0BAA0B,GAAGL,SAAS,CAACa,KAAK,CAACC,cAAc,IAAI,cAAc;UAC7ER,SAAS,GAAGK,OAAO,CAACI,aAAa,CAACJ,OAAO,CAACK,kBAAkB,CAAC;UAC7DT,gBAAgB,GAAGI,OAAO,CAACK,kBAAkB;QACjD,KAAKlC,kBAAkB;UACnB,IAAImC,IAAI,GAAGhB,QAAQ,CAACC,aAAa,CAAE,OAAMJ,cAAe,OAAMC,cAAe,YAAW,CAAC;UACzFkB,IAAI,CAACC,aAAa,CAAC,IAAIC,UAAU,CAAC,WAAW,EAAE;YAAEC,OAAO,EAAE,IAAI;YAAEC,UAAU,EAAE,IAAI;YAAEC,OAAO,EAAE;UAAE,CAAC,CAAC,CAAC;UAChGlB,KAAK,GAAGrB,2BAA2B;UACnC;QACJ,KAAKA,2BAA2B;UAC5B;UACA,IAAIwC,gBAAgB,GAAGtB,QAAQ,CAACC,aAAa,CAAC,qBAAqB,CAAC;UACpEqB,gBAAgB,CAACL,aAAa,CAAC,IAAIC,UAAU,CAAC,OAAO,EAAE;YAAEC,OAAO,EAAE,IAAI;YAAEC,UAAU,EAAE,IAAI;YAAEC,OAAO,EAAE;UAAE,CAAC,CAAC,CAAC;UACxGlB,KAAK,GAAGpB,MAAM;UACd;QACJ,KAAKA,MAAM;UACP,IAAIwC,eAAe,GAAG;YAAEV,cAAc,EAAET,0BAA0B,GAAG,cAAc,GAAG;UAAO,CAAC;UAC9F,IAAIoB,WAAW,GAAG;YAAEX,cAAc,EAAET,0BAA0B,GAAG,MAAM,GAAG;UAAe,CAAC;UAC1FhC,UAAU,CAACyB,cAAc,EAAEC,cAAc,EAAE0B,WAAW,CAAC;UACvDnD,YAAY,CAACwB,cAAc,EAAEC,cAAc,EAAEyB,eAAe,EAAEC,WAAW,EAAEnB,SAAS,EAAEC,gBAAgB,CAAC;UACvGf,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC;UAC5D,IAAIC,aAAa,IAAIG,cAAc,EAAErB,UAAU,CAAC,qBAAqB,EAAEqB,cAAc,CAAC;UACtFnB,QAAQ,CAACQ,IAAI,CAAC;UACdwC,aAAa,CAAClB,KAAK,CAAC;UACpB;MAAM;IAElB,CAAC,CAAC,OAAOjB,CAAC,EAAE;MACR,IAAIoC,MAAM,GAAG,wDAAwD,GAAGjC,aAAa,GAAG,YAAY,GAAGI,cAAc,GAAG,YAAY,GAAGC,cAAc,GAAG,4BAA4B,GAAGM,0BAA0B,GAAG,KAAK,GAAG,IAAI,GAAG,OAAO,GAAGd,CAAC;MAC9OC,OAAO,CAACC,GAAG,CAACkC,MAAM,CAAC;MACnBpD,QAAQ,CAACoD,MAAM,CAAC;MAChBD,aAAa,CAAClB,KAAK,CAAC;IACxB;EACJ,CAAC,EAAE,GAAG,CAAC;AACX;AAEA,SAASvB,iBAAiB,EAAEI,4BAA4B"},"metadata":{},"sourceType":"module","externalDependencies":[]}