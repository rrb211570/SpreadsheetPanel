{"ast":null,"code":"import _slicedToArray from\"C:/Users/rband/Desktop/SpreadsheetPanel/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{compareDOM,compareStore,logError,logSuccess}from'../../../../tests/helper.js';import{getInLine,nextTurn}from'../../../../tests/sequenceHelpers.js';import{store}from'./../../../../store/store.js';var WAIT_IN_QUEUE=-1;var ARRANGE=0;var ACTION_SELECT_CELL=1;var ACTION_TOGGLE_STRIKETHROUGH=2;var ASSERT=3;function strikethroughTest(turn){var changes=[[4,5],[1,2],[3,7],[8,2],[2,4]];try{if(changes.length>0)checkReactionOfStrikethrough(1,changes[0],turn,true,changes.length);for(var i=1;i<changes.length;++i)checkReactionOfStrikethrough(i+1,changes[i],turn,false,changes.length);}catch(e){console.log('Error: checkReactionOfstrikethrough param error: '+e);logError(null,null,null,null,e);}}function checkReactionOfStrikethrough(testCaseIndex,testDetails,turn,isFirstCall,totalTestCases){var _testDetails=_slicedToArray(testDetails,2),selectedRowNum=_testDetails[0],selectedColNum=_testDetails[1];var cellValue=document.querySelector(\".row\".concat(selectedRowNum,\".col\").concat(selectedColNum,\">.cellValueDiv>.cellValue\"));var myTurnNumber=getInLine(turn);var stage=WAIT_IN_QUEUE;var wasPreviouslyStrikethrough;var prevState;var prevHistoryIndex;var timer=setInterval(function(){try{switch(stage){case WAIT_IN_QUEUE:if(turn.current==myTurnNumber){if(isFirstCall)console.log('\\n--------STRIKETHROUGH TEST--------------------');stage=ARRANGE;}break;case ARRANGE:var history=store.getState().history;wasPreviouslyStrikethrough=cellValue.style.textDecoration=='line-through';prevState=history.changeHistory[history.changeHistoryIndex];prevHistoryIndex=history.changeHistoryIndex;case ACTION_SELECT_CELL:var cell=document.querySelector(\".row\".concat(selectedRowNum,\".col\").concat(selectedColNum,\" .coverDiv\"));cell.dispatchEvent(new MouseEvent('mousedown',{bubbles:true,cancelable:true,clientX:0}));stage=ACTION_TOGGLE_STRIKETHROUGH;break;case ACTION_TOGGLE_STRIKETHROUGH:// trigger click event on strikethroughBtn\nvar strikethroughBtn=document.querySelector('.strikethrough__btn');strikethroughBtn.dispatchEvent(new MouseEvent('click',{bubbles:true,cancelable:true,clientX:0}));stage=ASSERT;break;case ASSERT:var prevPropertyObj={textDecoration:wasPreviouslyStrikethrough?'line-through':'none'};var propertyObj={textDecoration:wasPreviouslyStrikethrough?'none':'line-through'};compareDOM(selectedRowNum,selectedColNum,propertyObj);compareStore(selectedRowNum,selectedColNum,prevPropertyObj,propertyObj,prevState,prevHistoryIndex);console.log('strikethrough affects store and DOM correctly');if(testCaseIndex==totalTestCases)logSuccess('strikethroughTest()',totalTestCases);nextTurn(turn);clearInterval(timer);break;}}catch(e){var errMsg='Err: checkReactionOfStrikethrough(): { testCaseIndex: '+testCaseIndex+', rowNum: '+selectedRowNum+', colNum: '+selectedColNum+', toggling strikethrough: '+wasPreviouslyStrikethrough?'off':'on'+' } : '+e;console.log(errMsg);logError(errMsg);clearInterval(timer);}},200);}export{strikethroughTest,checkReactionOfStrikethrough};","map":{"version":3,"names":["compareDOM","compareStore","logError","logSuccess","getInLine","nextTurn","store","WAIT_IN_QUEUE","ARRANGE","ACTION_SELECT_CELL","ACTION_TOGGLE_STRIKETHROUGH","ASSERT","strikethroughTest","turn","changes","length","checkReactionOfStrikethrough","i","e","console","log","testCaseIndex","testDetails","isFirstCall","totalTestCases","selectedRowNum","selectedColNum","cellValue","document","querySelector","myTurnNumber","stage","wasPreviouslyStrikethrough","prevState","prevHistoryIndex","timer","setInterval","current","history","getState","style","textDecoration","changeHistory","changeHistoryIndex","cell","dispatchEvent","MouseEvent","bubbles","cancelable","clientX","strikethroughBtn","prevPropertyObj","propertyObj","clearInterval","errMsg"],"sources":["C:/Users/rband/Desktop/SpreadsheetPanel/client/src/components/FormatPanel/components/Strikethrough/test.js"],"sourcesContent":["import { compareDOM, compareStore, logError, logSuccess } from '../../../../tests/helper.js';\r\nimport { getInLine, nextTurn } from '../../../../tests/sequenceHelpers.js'\r\nimport { store } from './../../../../store/store.js'\r\n\r\nconst WAIT_IN_QUEUE = -1;\r\nconst ARRANGE = 0;\r\nconst ACTION_SELECT_CELL = 1;\r\nconst ACTION_TOGGLE_STRIKETHROUGH = 2;\r\nconst ASSERT = 3;\r\n\r\nfunction strikethroughTest(turn) {\r\n    let changes = [[4, 5], [1, 2], [3, 7], [8, 2], [2, 4]];\r\n    try {\r\n        if (changes.length > 0) checkReactionOfStrikethrough(1, changes[0], turn, true, changes.length);\r\n        for (let i = 1; i < changes.length; ++i) checkReactionOfStrikethrough(i + 1, changes[i], turn, false, changes.length);\r\n    } catch (e) {\r\n        console.log('Error: checkReactionOfstrikethrough param error: ' + e);\r\n        logError(null, null, null, null, e);\r\n    }\r\n}\r\n\r\nfunction checkReactionOfStrikethrough(testCaseIndex, testDetails, turn, isFirstCall, totalTestCases) {\r\n    let [selectedRowNum, selectedColNum] = testDetails;\r\n    let cellValue = document.querySelector(`.row${selectedRowNum}.col${selectedColNum}>.cellValueDiv>.cellValue`);\r\n    let myTurnNumber = getInLine(turn);\r\n    let stage = WAIT_IN_QUEUE;\r\n    let wasPreviouslyStrikethrough;\r\n    let prevState;\r\n    let prevHistoryIndex;\r\n    let timer = setInterval(() => {\r\n        try {\r\n            switch (stage) {\r\n                case WAIT_IN_QUEUE:\r\n                    if (turn.current == myTurnNumber) {\r\n                        if (isFirstCall) console.log('\\n--------STRIKETHROUGH TEST--------------------');\r\n                        stage = ARRANGE;\r\n                    }\r\n                    break;\r\n                case ARRANGE:\r\n                    let history = store.getState().history;\r\n                    wasPreviouslyStrikethrough = cellValue.style.textDecoration == 'line-through';\r\n                    prevState = history.changeHistory[history.changeHistoryIndex];\r\n                    prevHistoryIndex = history.changeHistoryIndex;\r\n                case ACTION_SELECT_CELL:\r\n                    let cell = document.querySelector(`.row${selectedRowNum}.col${selectedColNum} .coverDiv`);\r\n                    cell.dispatchEvent(new MouseEvent('mousedown', { bubbles: true, cancelable: true, clientX: 0 }));\r\n                    stage = ACTION_TOGGLE_STRIKETHROUGH;\r\n                    break;\r\n                case ACTION_TOGGLE_STRIKETHROUGH:\r\n                    // trigger click event on strikethroughBtn\r\n                    let strikethroughBtn = document.querySelector('.strikethrough__btn');\r\n                    strikethroughBtn.dispatchEvent(new MouseEvent('click', { bubbles: true, cancelable: true, clientX: 0 }));\r\n                    stage = ASSERT;\r\n                    break;\r\n                case ASSERT:\r\n                    let prevPropertyObj = { textDecoration: wasPreviouslyStrikethrough ? 'line-through' : 'none' };\r\n                    let propertyObj = { textDecoration: wasPreviouslyStrikethrough ? 'none' : 'line-through' };\r\n                    compareDOM(selectedRowNum, selectedColNum, propertyObj);\r\n                    compareStore(selectedRowNum, selectedColNum, prevPropertyObj, propertyObj, prevState, prevHistoryIndex);\r\n                    console.log('strikethrough affects store and DOM correctly');\r\n                    if (testCaseIndex == totalTestCases) logSuccess('strikethroughTest()', totalTestCases);\r\n                    nextTurn(turn);\r\n                    clearInterval(timer);\r\n                    break;\r\n            }\r\n        } catch (e) {\r\n            let errMsg = 'Err: checkReactionOfStrikethrough(): { testCaseIndex: ' + testCaseIndex + ', rowNum: ' + selectedRowNum + ', colNum: ' + selectedColNum + ', toggling strikethrough: ' + wasPreviouslyStrikethrough ? 'off' : 'on' + ' } : ' + e;\r\n            console.log(errMsg);\r\n            logError(errMsg);\r\n            clearInterval(timer);\r\n        }\r\n    }, 200);\r\n}\r\n\r\nexport { strikethroughTest, checkReactionOfStrikethrough };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}