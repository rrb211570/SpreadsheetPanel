{"ast":null,"code":"import _toConsumableArray from\"C:/Users/rband/Desktop/SpreadsheetPanel/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/rband/Desktop/SpreadsheetPanel/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _createForOfIteratorHelper from\"C:/Users/rband/Desktop/SpreadsheetPanel/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _regeneratorRuntime from\"C:/Users/rband/Desktop/SpreadsheetPanel/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/rband/Desktop/SpreadsheetPanel/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{store}from'./../../../store/store.js';var loadSheetAPI=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id,rootURL){var response,body;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(rootURL+'loadSheet/'+id,{credentials:'include'});case 2:response=_context.sent;_context.next=5;return response.json();case 5:body=_context.sent;if(!(response.status!==200)){_context.next=8;break;}throw Error(body.message);case 8:return _context.abrupt(\"return\",body);case 9:case\"end\":return _context.stop();}},_callee);}));return function loadSheetAPI(_x,_x2){return _ref.apply(this,arguments);};}();var saveAPI=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id,rootURL){var exposedCollectedData,response,body;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:exposedCollectedData=exposeCollectedData(store.getState().history.collectedData);_context2.next=3;return fetch(rootURL+'saveSheet/'+id,{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({exposedCollectedData:exposedCollectedData}),credentials:'include'});case 3:response=_context2.sent;body=response.json();if(!(response.status!==200)){_context2.next=7;break;}throw Error(body.message);case 7:return _context2.abrupt(\"return\",body);case 8:case\"end\":return _context2.stop();}},_callee2);}));return function saveAPI(_x3,_x4){return _ref2.apply(this,arguments);};}();function exposeCollectedData(data){var individualArr=[];var _iterator=_createForOfIteratorHelper(data.getIndividualEntries()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),entryKey=_step$value[0],value=_step$value[1];var individual={entryKey:entryKey};individual.styleMap=_toConsumableArray(_toConsumableArray(value.getStyleMap().entries()).map(function(styleEntry){return[styleEntry[0],styleEntry[1]];}));if(entryKey!='sheet'&&!/.col\\d+/.test(entryKey))individual.row=value.getRow();else if(/.col\\d+/.test(entryKey)){individual.row=value.getCellRow();individual.col=value.getCellCol();individual.val=value.getVal();}individualArr.push(individual);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var groupArr=[];var _iterator2=_createForOfIteratorHelper(data.getGroupEntries()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_slicedToArray(_step2.value,2),groupName=_step2$value[0],styleMap=_step2$value[1];var group={groupName:groupName};group.styleMap=_toConsumableArray(_toConsumableArray(styleMap.entries()).map(function(styleEntry){return[styleEntry[0],styleEntry[1]];}));groupArr.push(group);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return{individualData:individualArr,groupData:groupArr};}export{loadSheetAPI,saveAPI};","map":{"version":3,"names":["store","loadSheetAPI","id","rootURL","fetch","credentials","response","json","body","status","Error","message","saveAPI","exposedCollectedData","exposeCollectedData","getState","history","collectedData","method","headers","JSON","stringify","data","individualArr","getIndividualEntries","entryKey","value","individual","styleMap","getStyleMap","entries","map","styleEntry","test","row","getRow","getCellRow","col","getCellCol","val","getVal","push","groupArr","getGroupEntries","groupName","group","individualData","groupData"],"sources":["C:/Users/rband/Desktop/SpreadsheetPanel/client/src/components/SpreadSheetPanel/helpers/API.js"],"sourcesContent":["import { store } from './../../../store/store.js'\r\n\r\nlet loadSheetAPI = async (id, rootURL) => {\r\n    const response = await fetch(rootURL + 'loadSheet/' + id, { credentials: 'include' });\r\n    const body = await response.json();\r\n\r\n    if (response.status !== 200) {\r\n        throw Error(body.message)\r\n    }\r\n    return body;\r\n}\r\nlet saveAPI = async (id, rootURL) => {\r\n    let exposedCollectedData = exposeCollectedData(store.getState().history.collectedData);\r\n    const response = await fetch(rootURL + 'saveSheet/' + id, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n            exposedCollectedData: exposedCollectedData\r\n        }),\r\n        credentials: 'include'\r\n    });\r\n    const body = response.json();\r\n    if (response.status !== 200) {\r\n        throw Error(body.message)\r\n    }\r\n    return body;\r\n}\r\nfunction exposeCollectedData(data) {\r\n    let individualArr = [];\r\n    for (const [entryKey, value] of data.getIndividualEntries()) {\r\n        let individual = { entryKey: entryKey };\r\n        individual.styleMap = [...[...value.getStyleMap().entries()].map(styleEntry => {\r\n            return [styleEntry[0], styleEntry[1]];\r\n        })];\r\n        if (entryKey != 'sheet' && !/.col\\d+/.test(entryKey)) individual.row = value.getRow();\r\n        else if (/.col\\d+/.test(entryKey)) {\r\n            individual.row = value.getCellRow();\r\n            individual.col = value.getCellCol();\r\n            individual.val = value.getVal();\r\n        }\r\n        individualArr.push(individual);\r\n    }\r\n    let groupArr = [];\r\n    for (const [groupName, styleMap] of data.getGroupEntries()) {\r\n        let group = { groupName: groupName };\r\n        group.styleMap = [...[...styleMap.entries()].map(styleEntry => {\r\n            return [styleEntry[0], styleEntry[1]];\r\n        })];\r\n        groupArr.push(group);\r\n    }\r\n    return { individualData: individualArr, groupData: groupArr };\r\n}\r\n\r\nexport { loadSheetAPI, saveAPI };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}