{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/rband/Desktop/SpreadsheetPanel/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"C:/Users/rband/Desktop/SpreadsheetPanel/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{store}from'../../../../store/store.js';import{useSelector}from'react-redux';import{getFontColor,setFontColor}from'../../../../store/reducers/selectionSlice.js';import Data from\"../../../../data/data.js\";import recordChange from\"../../../../data/modifiers/recordChange.js\";import'./FontColor.css';import{hexToRgb}from\"../../helper.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FontColor(_ref){var selectionEntries=_ref.selectionEntries,colors=_ref.colors;var color=useSelector(getFontColor);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),insideDropdown=_useState2[0],setInsideDropdown=_useState2[1];var toggleColorGrid=function toggleColorGrid(e){var colorGrid=e.target.parentElement.querySelector('.fontColor__colorGrid');if(colorGrid.style.opacity==1){colorGrid.style.opacity=0;colorGrid.style.zIndex=-1;colorGrid.style.pointerEvents='none';}else{colorGrid.style.opacity=1;colorGrid.style.zIndex=3;colorGrid.style.pointerEvents='auto';}};var createColorGrid=function createColorGrid(colors){var colorGrid=[];var index1=0;var _iterator=_createForOfIteratorHelper(colors),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var colorSet=_step.value;var colorSetArr=[];var index2=0;var _iterator2=_createForOfIteratorHelper(colorSet),_step2;try{var _loop=function _loop(){var colorOption=_step2.value;colorSetArr.push(/*#__PURE__*/_jsx(\"button\",{className:\"fontColor__colorSquareBtn\",style:{},onClick:function onClick(){return updateFontColor(selectionEntries,color,colorOption);},children:/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'100%',display:'grid',placeItems:'center'},children:/*#__PURE__*/_jsx(\"div\",{style:{width:'15px',height:'15px',backgroundColor:colorOption,border:colorOption=='white'||index2==4?'1px solid lightgray':'none'}})})},index2++));};for(_iterator2.s();!(_step2=_iterator2.n()).done;){_loop();}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}colorGrid.push(/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column'},children:colorSetArr},index1++));}}catch(err){_iterator.e(err);}finally{_iterator.f();}return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex'},children:colorGrid});};var recordMouseEnter=function recordMouseEnter(){setInsideDropdown(true);};var recordMouseLeave=function recordMouseLeave(){setInsideDropdown(false);};var hideColorGrid=function hideColorGrid(e){if(!insideDropdown){e.currentTarget.querySelector('.fontColor__colorGrid').style.opacity=0;e.currentTarget.querySelector('.fontColor__colorGrid').style.zIndex=-1;e.currentTarget.querySelector('.fontColor__colorGrid').style.pointerEvents='none';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"fontColor\",tabIndex:\"-1\",onMouseEnter:recordMouseEnter,onMouseLeave:recordMouseLeave,onBlur:hideColorGrid,children:[/*#__PURE__*/_jsx(\"button\",{className:\"fontColor__btn\",onClick:toggleColorGrid,children:/*#__PURE__*/_jsxs(\"div\",{className:\"fontColor__btnDiv\",style:{height:'100%',width:'100%',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'space-around'},children:[/*#__PURE__*/_jsx(\"p\",{style:{height:'19px',margin:'0 0 4px 0',fontSize:'1rem'},children:\"A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fontColor__colorBar\",style:{position:'absolute',bottom:'0px',backgroundColor:color,boxShadow:color=='white'?'inset 0 0 0 1px gray':'none'}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"fontColor__colorGrid\",children:createColorGrid(colors)})]});}var updateFontColor=function updateFontColor(selectionEntries,prevColor,newColor){newColor=hexToRgb(newColor);var prevData=new Data();var newData=new Data();var _iterator3=_createForOfIteratorHelper(selectionEntries.values()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var cell=_step3.value;var _cell$split$map=cell.split(',').map(function(num){return parseInt(num,10);}),_cell$split$map2=_slicedToArray(_cell$split$map,2),rowNum=_cell$split$map2[0],colNum=_cell$split$map2[1];prevData.setIndividualEntry('.row'+rowNum+'.col'+colNum,new Map([['fontColor',prevColor]]),rowNum,colNum,null);newData.setIndividualEntry('.row'+rowNum+'.col'+colNum,new Map([['fontColor',newColor]]),rowNum,colNum,null);document.querySelector(\".row\".concat(rowNum,\".col\").concat(colNum,\">.cellValueDiv>.cellValue\")).style.color=newColor;}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}recordChange(prevData,newData);store.dispatch(setFontColor({fontColor:newColor}));};export{FontColor,updateFontColor};","map":{"version":3,"names":["React","useState","store","useSelector","getFontColor","setFontColor","Data","recordChange","hexToRgb","FontColor","selectionEntries","colors","color","insideDropdown","setInsideDropdown","toggleColorGrid","e","colorGrid","target","parentElement","querySelector","style","opacity","zIndex","pointerEvents","createColorGrid","index1","colorSet","colorSetArr","index2","colorOption","push","updateFontColor","width","height","display","placeItems","backgroundColor","border","flexDirection","recordMouseEnter","recordMouseLeave","hideColorGrid","currentTarget","alignItems","justifyContent","margin","fontSize","position","bottom","boxShadow","prevColor","newColor","prevData","newData","values","cell","split","map","num","parseInt","rowNum","colNum","setIndividualEntry","Map","document","dispatch","fontColor"],"sources":["C:/Users/rband/Desktop/SpreadsheetPanel/client/src/components/FormatPanel/components/FontColor/FontColor.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { store } from '../../../../store/store.js'\r\nimport { useSelector } from 'react-redux';\r\nimport { getFontColor, setFontColor } from '../../../../store/reducers/selectionSlice.js';\r\nimport Data from \"../../../../data/data.js\";\r\nimport recordChange from \"../../../../data/modifiers/recordChange.js\";\r\nimport './FontColor.css'\r\nimport { hexToRgb } from \"../../helper.js\";\r\n\r\nfunction FontColor({ selectionEntries, colors }) {\r\n    const color = useSelector(getFontColor);\r\n    const [insideDropdown, setInsideDropdown] = useState(false);\r\n\r\n    let toggleColorGrid = (e) => {\r\n        let colorGrid = e.target.parentElement.querySelector('.fontColor__colorGrid');\r\n        if (colorGrid.style.opacity == 1) {\r\n            colorGrid.style.opacity = 0;\r\n            colorGrid.style.zIndex = -1;\r\n            colorGrid.style.pointerEvents = 'none';\r\n        } else {\r\n            colorGrid.style.opacity = 1;\r\n            colorGrid.style.zIndex = 3;\r\n            colorGrid.style.pointerEvents = 'auto';\r\n        }\r\n    }\r\n\r\n    let createColorGrid = (colors) => {\r\n        let colorGrid = [];\r\n        let index1 = 0;\r\n        for (const colorSet of colors) {\r\n            let colorSetArr = [];\r\n            let index2 = 0;\r\n            for (const colorOption of colorSet) {\r\n                colorSetArr.push(\r\n                    <button key={index2++} className='fontColor__colorSquareBtn' style={{}} onClick={() => updateFontColor(selectionEntries, color, colorOption)}>\r\n                        <div style={{ width: '100%', height: '100%', display: 'grid', placeItems: 'center' }}>\r\n                            <div style={{ width: '15px', height: '15px', backgroundColor: colorOption, border: colorOption == 'white' || index2 == 4 ? '1px solid lightgray' : 'none' }}></div>\r\n                        </div>\r\n                    </button>\r\n                );\r\n            }\r\n            colorGrid.push(<div key={index1++} style={{ display: 'flex', flexDirection: 'column' }}>{colorSetArr}</div>);\r\n        }\r\n        return <div style={{ display: 'flex' }}>{colorGrid}</div>;\r\n    }\r\n\r\n    let recordMouseEnter = () => {\r\n        setInsideDropdown(true);\r\n    }\r\n\r\n    let recordMouseLeave = () => {\r\n        setInsideDropdown(false);\r\n    }\r\n\r\n    let hideColorGrid = (e) => {\r\n        if (!insideDropdown) {\r\n            e.currentTarget.querySelector('.fontColor__colorGrid').style.opacity = 0;\r\n            e.currentTarget.querySelector('.fontColor__colorGrid').style.zIndex = -1;\r\n            e.currentTarget.querySelector('.fontColor__colorGrid').style.pointerEvents = 'none';\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='fontColor' tabIndex='-1' onMouseEnter={recordMouseEnter} onMouseLeave={recordMouseLeave} onBlur={hideColorGrid} >\r\n            <button className='fontColor__btn' onClick={toggleColorGrid}>\r\n                <div className='fontColor__btnDiv' style={{ height: '100%', width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'space-around' }}>\r\n                    <p style={{ height: '19px', margin: '0 0 4px 0', fontSize: '1rem' }}>A</p>\r\n                    <div className='fontColor__colorBar' style={{ position: 'absolute', bottom: '0px', backgroundColor: color, boxShadow: color == 'white' ? 'inset 0 0 0 1px gray' : 'none' }}></div>\r\n                </div>\r\n            </button>\r\n            <div className='fontColor__colorGrid' >\r\n                {createColorGrid(colors)}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nlet updateFontColor = (selectionEntries, prevColor, newColor) => {\r\n    newColor = hexToRgb(newColor);\r\n    let prevData = new Data();\r\n    let newData = new Data();\r\n    for (const cell of selectionEntries.values()) {\r\n        let [rowNum, colNum] = cell.split(',').map((num) => parseInt(num, 10));\r\n        prevData.setIndividualEntry('.row' + rowNum + '.col' + colNum, new Map([['fontColor', prevColor]]), rowNum, colNum, null);\r\n        newData.setIndividualEntry('.row' + rowNum + '.col' + colNum, new Map([['fontColor', newColor]]), rowNum, colNum, null);\r\n        document.querySelector(`.row${rowNum}.col${colNum}>.cellValueDiv>.cellValue`).style.color = newColor;\r\n    }\r\n    recordChange(prevData, newData);\r\n    store.dispatch(setFontColor({ fontColor: newColor }));\r\n}\r\n\r\nexport { FontColor, updateFontColor };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}