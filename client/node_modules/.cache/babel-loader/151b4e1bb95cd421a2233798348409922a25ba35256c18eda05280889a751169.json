{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport Data from '../../data/data.js';\nexport const historySlice = createSlice({\n  name: 'history',\n  initialState: {\n    loadedSheet: null,\n    changeHistory: [new Data()],\n    changeHistoryIndex: 0,\n    collectedData: new Data(),\n    sentData: new Data()\n  },\n  reducers: {\n    loadSheet(state, action) {\n      state.loadedSheet = action.payload.loadedSheet;\n      state.changeHistory = state.changeHistory;\n      state.changeHistoryIndex = state.changeHistoryIndex;\n      state.collectedData = state.collectedData;\n      state.sentData = state.sentData;\n    },\n    newHistoryState(state, action) {\n      state.loadedSheet = state.loadedSheet;\n      state.changeHistory = [...state.changeHistory.slice(0, state.changeHistoryIndex), action.payload.prevRecordedData, action.payload.dataAfterChange];\n      state.changeHistoryIndex = state.changeHistoryIndex + 1;\n      state.collectedData = action.payload.collectedData;\n      state.sentData = state.sentData;\n    },\n    undo(state, action) {\n      state.loadedSheet = state.loadedSheet;\n      state.changeHistory = state.changeHistory;\n      state.changeHistoryIndex = state.changeHistoryIndex - 1;\n      state.collectedData = action.payload.collectedData;\n      state.sentData = state.sentData;\n    },\n    redo(state, action) {\n      state.loadedSheet = state.loadedSheet;\n      state.changeHistory = state.changeHistory;\n      state.changeHistoryIndex = state.changeHistoryIndex + 1;\n      state.collectedData = action.payload.collectedData;\n      state.sentData = state.sentData;\n    },\n    clearHistory(state, action) {\n      state.loadedSheet = state.loadedSheet;\n      state.changeHistory = [new Data()];\n      state.changeHistoryIndex = 0;\n      state.collectedData = new Data();\n      state.sentData = new Data();\n    },\n    save(state, action) {\n      state.loadedSheet = state.loadedSheet;\n      state.changeHistory = state.changeHistory;\n      state.changeHistoryIndex = state.changeHistoryIndex;\n      state.collectedData = new Data();\n      state.sentData = state.collectedData;\n    },\n    rollBackAndMerge(state, action) {\n      state.loadedSheet = state.loadedSheet;\n      state.changeHistory = state.changeHistory;\n      state.changeHistoryIndex = state.changeHistoryIndex;\n      state.collectedData = merge(state.collectedData, state.sentData);\n      state.sentData = new Data();\n    }\n  }\n});\nfunction merge(collectedData, savedData) {\n  return savedData; // should merge with collectedData as well\n}\n\nexport const {\n  loadSheet,\n  newHistoryState,\n  undo,\n  redo,\n  clearHistory,\n  save,\n  rollBackAndMerge\n} = historySlice.actions;\nexport const getLoadedSheet = state => state.history.loadedSheet;\nexport const getChangeHistory = state => state.history.changeHistory;\nexport const getChangeHistoryIndex = state => state.history.changeHistoryIndex;\nexport const getCollectedData = state => state.history.collectedData;\nexport const getSentData = state => state.history.sentData;\nexport default historySlice.reducer;","map":{"version":3,"names":["createSlice","Data","historySlice","name","initialState","loadedSheet","changeHistory","changeHistoryIndex","collectedData","sentData","reducers","loadSheet","state","action","payload","newHistoryState","slice","prevRecordedData","dataAfterChange","undo","redo","clearHistory","save","rollBackAndMerge","merge","savedData","actions","getLoadedSheet","history","getChangeHistory","getChangeHistoryIndex","getCollectedData","getSentData","reducer"],"sources":["C:/Users/rband/Desktop/SpreadsheetPanel/client/src/store/reducers/historySlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\r\nimport Data from '../../data/data.js'\r\n\r\nexport const historySlice = createSlice({\r\n    name: 'history',\r\n    initialState: {\r\n        loadedSheet: null,\r\n        changeHistory: [new Data()],\r\n        changeHistoryIndex: 0,\r\n        collectedData: new Data(),\r\n        sentData: new Data()\r\n    },\r\n    reducers: {\r\n        loadSheet(state, action) {\r\n            state.loadedSheet = action.payload.loadedSheet;\r\n            state.changeHistory = state.changeHistory;\r\n            state.changeHistoryIndex = state.changeHistoryIndex;\r\n            state.collectedData = state.collectedData;\r\n            state.sentData = state.sentData;\r\n        },\r\n        newHistoryState(state, action) {\r\n            state.loadedSheet = state.loadedSheet;\r\n            state.changeHistory = [...state.changeHistory.slice(0, state.changeHistoryIndex), action.payload.prevRecordedData, action.payload.dataAfterChange];\r\n            state.changeHistoryIndex = state.changeHistoryIndex + 1;\r\n            state.collectedData = action.payload.collectedData;\r\n            state.sentData = state.sentData;\r\n        },\r\n        undo(state, action) {\r\n            state.loadedSheet = state.loadedSheet;\r\n            state.changeHistory = state.changeHistory;\r\n            state.changeHistoryIndex = state.changeHistoryIndex - 1;\r\n            state.collectedData = action.payload.collectedData;\r\n            state.sentData = state.sentData;\r\n        },\r\n        redo(state, action) {\r\n            state.loadedSheet = state.loadedSheet;\r\n            state.changeHistory = state.changeHistory;\r\n            state.changeHistoryIndex = state.changeHistoryIndex + 1;\r\n            state.collectedData = action.payload.collectedData;\r\n            state.sentData = state.sentData;\r\n        },\r\n        clearHistory(state, action) {\r\n            state.loadedSheet = state.loadedSheet;\r\n            state.changeHistory = [new Data()];\r\n            state.changeHistoryIndex = 0;\r\n            state.collectedData = new Data();\r\n            state.sentData = new Data();\r\n\r\n        },\r\n        save(state, action) {\r\n            state.loadedSheet = state.loadedSheet;\r\n            state.changeHistory = state.changeHistory;\r\n            state.changeHistoryIndex = state.changeHistoryIndex;\r\n            state.collectedData = new Data();\r\n            state.sentData = state.collectedData;\r\n\r\n        },\r\n        rollBackAndMerge(state, action) {\r\n            state.loadedSheet = state.loadedSheet;\r\n            state.changeHistory = state.changeHistory;\r\n            state.changeHistoryIndex = state.changeHistoryIndex;\r\n            state.collectedData = merge(state.collectedData, state.sentData);\r\n            state.sentData = new Data();\r\n\r\n        }\r\n    }\r\n});\r\n\r\nfunction merge(collectedData, savedData) {\r\n    return savedData; // should merge with collectedData as well\r\n}\r\n\r\nexport const { loadSheet, newHistoryState, undo, redo, clearHistory, save, rollBackAndMerge } = historySlice.actions;\r\nexport const getLoadedSheet = state => state.history.loadedSheet;\r\nexport const getChangeHistory = state => state.history.changeHistory;\r\nexport const getChangeHistoryIndex = state => state.history.changeHistoryIndex;\r\nexport const getCollectedData = state => state.history.collectedData;\r\nexport const getSentData = state => state.history.sentData;\r\nexport default historySlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}