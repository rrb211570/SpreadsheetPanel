{"ast":null,"code":"import _toConsumableArray from\"C:/Users/rband/Desktop/SpreadsheetPanel/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import{createSlice}from'@reduxjs/toolkit';import Data from'../../data/data.js';export var historySlice=createSlice({name:'history',initialState:{loadedSheet:null,changeHistory:[new Data()],changeHistoryIndex:0,collectedData:new Data(),sentData:new Data()},reducers:{loadSheet:function loadSheet(state,action){state.loadedSheet=action.payload.loadedSheet;state.changeHistory=state.changeHistory;state.changeHistoryIndex=state.changeHistoryIndex;state.collectedData=state.collectedData;state.sentData=state.sentData;},newHistoryState:function newHistoryState(state,action){state.loadedSheet=state.loadedSheet;state.changeHistory=[].concat(_toConsumableArray(state.changeHistory.slice(0,state.changeHistoryIndex)),[action.payload.prevRecordedData,action.payload.dataAfterChange]);state.changeHistoryIndex=state.changeHistoryIndex+1;state.collectedData=action.payload.collectedData;state.sentData=state.sentData;},undo:function undo(state,action){state.loadedSheet=state.loadedSheet;state.changeHistory=state.changeHistory;state.changeHistoryIndex=state.changeHistoryIndex-1;state.collectedData=action.payload.collectedData;state.sentData=state.sentData;},redo:function redo(state,action){state.loadedSheet=state.loadedSheet;state.changeHistory=state.changeHistory;state.changeHistoryIndex=state.changeHistoryIndex+1;state.collectedData=action.payload.collectedData;state.sentData=state.sentData;},clearHistory:function clearHistory(state,action){state.loadedSheet=state.loadedSheet;state.changeHistory=[new Data()];state.changeHistoryIndex=0;state.collectedData=new Data();state.sentData=new Data();},save:function save(state,action){state.loadedSheet=state.loadedSheet;state.changeHistory=state.changeHistory;state.changeHistoryIndex=state.changeHistoryIndex;state.collectedData=new Data();state.sentData=state.collectedData;},rollBackAndMerge:function rollBackAndMerge(state,action){state.loadedSheet=state.loadedSheet;state.changeHistory=state.changeHistory;state.changeHistoryIndex=state.changeHistoryIndex;state.collectedData=merge(state.collectedData,state.sentData);state.sentData=new Data();}}});function merge(collectedData,savedData){return savedData;// should merge with collectedData as well\n}var _historySlice$actions=historySlice.actions,loadSheet=_historySlice$actions.loadSheet,newHistoryState=_historySlice$actions.newHistoryState,undo=_historySlice$actions.undo,redo=_historySlice$actions.redo,clearHistory=_historySlice$actions.clearHistory,save=_historySlice$actions.save,rollBackAndMerge=_historySlice$actions.rollBackAndMerge;export{loadSheet,newHistoryState,undo,redo,clearHistory,save,rollBackAndMerge};export var getLoadedSheet=function getLoadedSheet(state){return state.history.loadedSheet;};export var getChangeHistory=function getChangeHistory(state){return state.history.changeHistory;};export var getChangeHistoryIndex=function getChangeHistoryIndex(state){return state.history.changeHistoryIndex;};export var getCollectedData=function getCollectedData(state){return state.history.collectedData;};export var getSentData=function getSentData(state){return state.history.sentData;};export default historySlice.reducer;","map":{"version":3,"names":["createSlice","Data","historySlice","name","initialState","loadedSheet","changeHistory","changeHistoryIndex","collectedData","sentData","reducers","loadSheet","state","action","payload","newHistoryState","slice","prevRecordedData","dataAfterChange","undo","redo","clearHistory","save","rollBackAndMerge","merge","savedData","actions","getLoadedSheet","history","getChangeHistory","getChangeHistoryIndex","getCollectedData","getSentData","reducer"],"sources":["C:/Users/rband/Desktop/SpreadsheetPanel/client/src/store/reducers/historySlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\r\nimport Data from '../../data/data.js'\r\n\r\nexport const historySlice = createSlice({\r\n    name: 'history',\r\n    initialState: {\r\n        loadedSheet: null,\r\n        changeHistory: [new Data()],\r\n        changeHistoryIndex: 0,\r\n        collectedData: new Data(),\r\n        sentData: new Data()\r\n    },\r\n    reducers: {\r\n        loadSheet(state, action) {\r\n            state.loadedSheet = action.payload.loadedSheet;\r\n            state.changeHistory = state.changeHistory;\r\n            state.changeHistoryIndex = state.changeHistoryIndex;\r\n            state.collectedData = state.collectedData;\r\n            state.sentData = state.sentData;\r\n        },\r\n        newHistoryState(state, action) {\r\n            state.loadedSheet = state.loadedSheet;\r\n            state.changeHistory = [...state.changeHistory.slice(0, state.changeHistoryIndex), action.payload.prevRecordedData, action.payload.dataAfterChange];\r\n            state.changeHistoryIndex = state.changeHistoryIndex + 1;\r\n            state.collectedData = action.payload.collectedData;\r\n            state.sentData = state.sentData;\r\n        },\r\n        undo(state, action) {\r\n            state.loadedSheet = state.loadedSheet;\r\n            state.changeHistory = state.changeHistory;\r\n            state.changeHistoryIndex = state.changeHistoryIndex - 1;\r\n            state.collectedData = action.payload.collectedData;\r\n            state.sentData = state.sentData;\r\n        },\r\n        redo(state, action) {\r\n            state.loadedSheet = state.loadedSheet;\r\n            state.changeHistory = state.changeHistory;\r\n            state.changeHistoryIndex = state.changeHistoryIndex + 1;\r\n            state.collectedData = action.payload.collectedData;\r\n            state.sentData = state.sentData;\r\n        },\r\n        clearHistory(state, action) {\r\n            state.loadedSheet = state.loadedSheet;\r\n            state.changeHistory = [new Data()];\r\n            state.changeHistoryIndex = 0;\r\n            state.collectedData = new Data();\r\n            state.sentData = new Data();\r\n\r\n        },\r\n        save(state, action) {\r\n            state.loadedSheet = state.loadedSheet;\r\n            state.changeHistory = state.changeHistory;\r\n            state.changeHistoryIndex = state.changeHistoryIndex;\r\n            state.collectedData = new Data();\r\n            state.sentData = state.collectedData;\r\n\r\n        },\r\n        rollBackAndMerge(state, action) {\r\n            state.loadedSheet = state.loadedSheet;\r\n            state.changeHistory = state.changeHistory;\r\n            state.changeHistoryIndex = state.changeHistoryIndex;\r\n            state.collectedData = merge(state.collectedData, state.sentData);\r\n            state.sentData = new Data();\r\n\r\n        }\r\n    }\r\n});\r\n\r\nfunction merge(collectedData, savedData) {\r\n    return savedData; // should merge with collectedData as well\r\n}\r\n\r\nexport const { loadSheet, newHistoryState, undo, redo, clearHistory, save, rollBackAndMerge } = historySlice.actions;\r\nexport const getLoadedSheet = state => state.history.loadedSheet;\r\nexport const getChangeHistory = state => state.history.changeHistory;\r\nexport const getChangeHistoryIndex = state => state.history.changeHistoryIndex;\r\nexport const getCollectedData = state => state.history.collectedData;\r\nexport const getSentData = state => state.history.sentData;\r\nexport default historySlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}